---
title: PA House - Progressive Above Replacement
author: Joseph Ciesielski
date: '2019-10-21'
slug: pa-house-progressive-above-replacement
categories: []
tags: []
comments: no
showcomments: yes
showpagemeta: yes
draft: true
---



<p>State legislatures were not immune to the much discussed ‘blue wave’ of 2018. In Pennsylvania, a number of candidates ran on progressive and far left platfroms and won including Sara Innamoroto, Summer Lee, and Elizabeth Fiedler.</p>
<p>Earlier this year, Data for Progress put out a piece of US House Democrats fared on their ‘<a href="https://www.dataforprogress.org/par-scores">Progressive above Replacement</a>’ score. They predicted how progressive a Democrat should be based on characteristics of their district; progressive-ness was rated based on votes and co-sponsorships of bills in key progressive issues including public housing, tuition-free college, and renewable energy.</p>
<p>I set out to replicate this analysis. In addition, I wanted to see if scores on this metrics had any relationship to whether candidates were re-elected (or decided not to run) in 2018.</p>
<pre class="r"><code>library(tidyverse)</code></pre>
<pre><code>## ── Attaching packages ────────────────────────────────── tidyverse 1.3.0 ──</code></pre>
<pre><code>## ✔ ggplot2 3.2.1     ✔ purrr   0.3.3
## ✔ tibble  2.1.3     ✔ dplyr   0.8.3
## ✔ tidyr   1.0.0     ✔ stringr 1.4.0
## ✔ readr   1.3.1     ✔ forcats 0.4.0</code></pre>
<pre><code>## ── Conflicts ───────────────────────────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()</code></pre>
<pre class="r"><code>library(rvest)</code></pre>
<pre><code>## Loading required package: xml2</code></pre>
<pre><code>## 
## Attaching package: &#39;rvest&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:purrr&#39;:
## 
##     pluck</code></pre>
<pre><code>## The following object is masked from &#39;package:readr&#39;:
## 
##     guess_encoding</code></pre>
<pre class="r"><code>library(broom)
library(scales)</code></pre>
<pre><code>## 
## Attaching package: &#39;scales&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:purrr&#39;:
## 
##     discard</code></pre>
<pre><code>## The following object is masked from &#39;package:readr&#39;:
## 
##     col_factor</code></pre>
<pre class="r"><code>library(rethinking)</code></pre>
<pre><code>## Loading required package: rstan</code></pre>
<pre><code>## Loading required package: StanHeaders</code></pre>
<pre><code>## rstan (Version 2.19.2, GitRev: 2e1f913d3ca3)</code></pre>
<pre><code>## For execution on a local, multicore CPU with excess RAM we recommend calling
## options(mc.cores = parallel::detectCores()).
## To avoid recompilation of unchanged Stan programs, we recommend calling
## rstan_options(auto_write = TRUE)</code></pre>
<pre><code>## 
## Attaching package: &#39;rstan&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:tidyr&#39;:
## 
##     extract</code></pre>
<pre><code>## Loading required package: parallel</code></pre>
<pre><code>## rethinking (Version 1.88)</code></pre>
<pre><code>## 
## Attaching package: &#39;rethinking&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:purrr&#39;:
## 
##     map</code></pre>
<pre class="r"><code>library(plotly)</code></pre>
<pre><code>## 
## Attaching package: &#39;plotly&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:ggplot2&#39;:
## 
##     last_plot</code></pre>
<pre><code>## The following object is masked from &#39;package:stats&#39;:
## 
##     filter</code></pre>
<pre><code>## The following object is masked from &#39;package:graphics&#39;:
## 
##     layout</code></pre>
<pre class="r"><code>theme_set(theme_minimal())</code></pre>
<div id="methodology" class="section level2">
<h2>Methodology</h2>
<p>I used votes on the following key divisive bills to asses progressiveness:</p>
<pre><code>- Bill 2154: rolling back regulations on oil and gas drilling
- Bill 97: charter school reform
- Bill 2060: taking away guns from domestic abusers
- Bill 178: allowing teachers to be laid off based on evaluations
- Bill 1419: expunging criminal records for those with minor offences
- Bill 27: shielding names of officers involved in shootings
- Bill 110: imposing limits on spending growth
- Bill 2017: overturning Department of Revenue ruling disallowing deduction of business expenses
- Bill 2477: funding medical marijuana research
- Bill 2138: work requirements for Medicaid
- Bill 2050: banning abortions for fetuses with Downs Syndrome </code></pre>
<div id="data-wrangling" class="section level3">
<h3>Data wrangling</h3>
<p>First we’ll scrape results from the 2016 and 2018 elections.</p>
<pre class="r"><code>scrape_election &lt;- function(year) {
  
 sprintf(
   &quot;https://en.wikipedia.org/wiki/%i_Pennsylvania_House_of_Representatives_election&quot;,
   year
 ) %&gt;% 
    read_html() %&gt;%
    html_table(fill = TRUE) %&gt;%
    .[[19]] %&gt;%
    janitor::clean_names() %&gt;%
    tbl_df() %&gt;%
    select(-party, -party_2, -party_3, -percent) %&gt;%
    rename(party = party_4) %&gt;% 
    mutate(
      year = year,
      votes = parse_number(votes)
    )

}

election_results &lt;- c(2016,  2018) %&gt;% 
  map_dfr(scrape_election) %&gt;% 
  group_by(district, year) %&gt;% 
  mutate(percent = votes / sum(votes)) %&gt;% 
  ungroup()</code></pre>
<p>Next we’ll get the information on the bills …</p>
<pre class="r"><code>bills &lt;- read_csv(&quot;https://raw.githubusercontent.com/jtcies/jtcies_site/master/content/data/pa-par/pa_house_bills_2017-18.csv&quot;)</code></pre>
<pre><code>## Parsed with column specification:
## cols(
##   bill = col_double(),
##   topic = col_character(),
##   progressive = col_double(),
##   url = col_character(),
##   vote_type = col_character()
## )</code></pre>
<pre class="r"><code>bills</code></pre>
<pre><code>## # A tibble: 11 x 5
##     bill topic        progressive url                             vote_type
##    &lt;dbl&gt; &lt;chr&gt;              &lt;dbl&gt; &lt;chr&gt;                           &lt;chr&gt;    
##  1  2154 environment           -1 https://www.legis.state.pa.us/… fp       
##  2    97 education             -1 https://www.legis.state.pa.us/… fp       
##  3  2060 gun control            1 https://www.legis.state.pa.us/… fp       
##  4   178 education             -1 https://www.legis.state.pa.us/… amendment
##  5  1419 criminal ju…           1 https://www.legis.state.pa.us/… fp       
##  6    27 criminal ju…          -1 https://www.legis.state.pa.us/… fp       
##  7   110 taxes                 -1 https://www.legis.state.pa.us/… fp       
##  8  2017 taxes                 -1 https://www.legis.state.pa.us/… fp       
##  9  2477 other                  1 https://www.legis.state.pa.us/… fp       
## 10  2138 other                 -1 https://www.legis.state.pa.us/… fp       
## 11  2050 other                 -1 https://www.legis.state.pa.us/… fp</code></pre>
<p>… and votes on those bills<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>.</p>
<pre class="r"><code>votes &lt;- read_csv(&quot;https://raw.githubusercontent.com/jtcies/jtcies_site/master/content/data/pa-par/bill_votes.csv&quot;)</code></pre>
<pre><code>## Parsed with column specification:
## cols(
##   bill = col_double(),
##   rep = col_character(),
##   vote = col_character()
## )</code></pre>
<pre class="r"><code>votes</code></pre>
<pre><code>## # A tibble: 2,108 x 3
##     bill rep         vote 
##    &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;
##  1  2154 BENNINGHOFF yay  
##  2  2154 BERNSTINE   yay  
##  3  2154 BLOOM       yay  
##  4  2154 BROWN, R.   yay  
##  5  2154 CAUSER      yay  
##  6  2154 CHRISTIANA  yay  
##  7  2154 COOK        yay  
##  8  2154 CORR        yay  
##  9  2154 COX         yay  
## 10  2154 CULVER      yay  
## # … with 2,098 more rows</code></pre>
<p>Phew, ok. Now we can start merging some of the data together. The goal is create a data set that inlcude election results, voting record, and whether someone was still a rep in 2018.</p>
<p>First pull out the election winners. No independents won in 2016, so that makes this a little easier.</p>
<pre class="r"><code>election_tidy &lt;- election_results %&gt;%
    group_by(district, year) %&gt;%
    mutate(
        win = percent == max(percent),
        margin = (percent - lead(percent, default = 0)) * 100
    ) %&gt;%
    filter(win) %&gt;% 
  ungroup() %&gt;% 
  rename(representative = candidate)

election_both &lt;- election_tidy %&gt;% 
  filter(year == 2016) %&gt;% 
  left_join(
    election_tidy %&gt;% 
      filter(year == 2018), 
    by = &quot;district&quot;,
    suffix = c(&quot;_2016&quot;, &quot;_2018&quot;)
    ) %&gt;% 
  mutate(same = representative_2016 == representative_2018)

election_both</code></pre>
<pre><code>## # A tibble: 203 x 20
##    district incumbent_2016 status_2016 party_2016 representative_…
##       &lt;int&gt; &lt;chr&gt;          &lt;chr&gt;       &lt;chr&gt;      &lt;chr&gt;           
##  1        1 Pat Harkins    Re-elected  Democratic Pat Harkins     
##  2        2 Florindo Fabr… Re-elected  Democratic Florindo Fabriz…
##  3        3 Ryan Bizzarro  Re-elected  Democratic Ryan Bizzarro   
##  4        4 Curt Sonney    Re-elected  Republican Curt Sonney     
##  5        5 Barry Jozwiak  Re-elected  Republican Barry Jozwiak   
##  6        6 Brad Roae      Re-elected  Republican Brad Roae       
##  7        7 Mark Longietti Re-elected  Democratic Mark Longietti  
##  8        8 Tedd Nesbit    Re-elected  Republican Tedd Nesbit     
##  9        9 Chris Sainato  Re-elected  Democratic Chris Sainato   
## 10       10 Jaret Gibbons  Defeated    Republican Aaron Bernstine 
## # … with 193 more rows, and 15 more variables: votes_2016 &lt;dbl&gt;,
## #   year_2016 &lt;dbl&gt;, percent_2016 &lt;dbl&gt;, win_2016 &lt;lgl&gt;,
## #   margin_2016 &lt;dbl&gt;, incumbent_2018 &lt;chr&gt;, status_2018 &lt;chr&gt;,
## #   party_2018 &lt;chr&gt;, representative_2018 &lt;chr&gt;, votes_2018 &lt;dbl&gt;,
## #   year_2018 &lt;dbl&gt;, percent_2018 &lt;dbl&gt;, win_2018 &lt;lgl&gt;,
## #   margin_2018 &lt;dbl&gt;, same &lt;lgl&gt;</code></pre>
<p>Next we’ll create a summary of each representative’s voting behavior by</p>
<pre class="r"><code>prog_summary &lt;- votes %&gt;% 
    left_join(bills, by = &quot;bill&quot;) %&gt;%
    mutate(
      progressive_vote = case_when(
        progressive == 1 &amp; vote == &quot;yay&quot; ~ 1,
        progressive == -1 &amp; vote == &quot;yay&quot; ~ 0,
        progressive == 1 &amp; vote == &quot;nay&quot; ~ 0,
        progressive == -1 &amp; vote == &quot;nay&quot; ~ 1
      )
    ) %&gt;% 
  group_by(rep) %&gt;% 
  summarise(
    progressive_votes = sum(progressive_vote),
    progressive_avg = mean(progressive_vote),
    votes_cast = n()
  )</code></pre>
<p>Merge the data.</p>
<pre class="r"><code>election_merge &lt;- election_both %&gt;%
    separate(representative_2016, into = c(&quot;first&quot;, &quot;last&quot;, &quot;suffix&quot;), sep = &quot; |-&quot;,
             remove = FALSE) %&gt;%
    mutate_at(vars(first, last, suffix), tolower) %&gt;%
    group_by(last) %&gt;%
    mutate(
        merge_name = case_when(
            !is.na(suffix) ~ suffix,
            length(row_number()) &gt; 1 ~ paste0(last, &quot; &quot;, str_sub(first, 1, 1)),
            TRUE ~ last
        ),
        merge_name = case_when(
            merge_name == &quot;keller m&quot; ~ &quot;keller mk&quot;,
            merge_name == &quot;keller b&quot; ~ &quot;keller w&quot;,
            merge_name == &quot;braneky&quot; ~ &quot;krueger&quot;,
            merge_name == &quot;quinn&quot; &amp; str_detect(last, &quot;marguerite&quot;) ~ &quot;quinn m&quot;,
            merge_name == &quot;quinn&quot; ~ &quot;quinn c&quot;,
            merge_name == &quot;day g&quot; ~ &quot;day&quot;,
            TRUE ~ merge_name
        )
    ) %&gt;%
    ungroup()</code></pre>
<pre><code>## Warning: Expected 3 pieces. Missing pieces filled with `NA` in 191 rows [1,
## 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, ...].</code></pre>
<pre class="r"><code>prog_merge &lt;- prog_summary %&gt;%
    mutate(rep = tolower(str_replace_all(rep, &quot;,|\\.&quot;, &quot;&quot;)))


pa_house_tidy &lt;- election_merge %&gt;%
    left_join(prog_merge, by = c(&quot;merge_name&quot; = &quot;rep&quot;))</code></pre>
</div>
</div>
<div id="visualizing" class="section level2">
<h2>Visualizing</h2>
<p>First let’s look at margin of victory by party. We should have 121 Repbublicans and 82 Democrats.</p>
<pre class="r"><code>pa_house_tidy %&gt;% 
  count(party_2016)</code></pre>
<pre><code>## # A tibble: 2 x 2
##   party_2016     n
##   &lt;chr&gt;      &lt;int&gt;
## 1 Democratic    82
## 2 Republican   121</code></pre>
<pre class="r"><code>pa_house_tidy %&gt;% 
  ggplot(aes(margin_2016, fill = party_2016)) +
    geom_histogram(binwidth = 2, show.legend = FALSE) +
    facet_wrap(~party_2016) +
    scale_fill_manual(
      values = c(&quot;Democratic&quot; = &quot;blue&quot;,
                 &quot;Republican&quot; = &quot;red&quot;)
    ) +
    labs(
            x = &quot;margin of victory - 2016 election&quot;
    )</code></pre>
<p><img src="/post/pa-house-progressive-above-replacement_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<p>It looks like both parties had an equal number of wins in uncontested districts, but Democrats had a greater percentage (because they held fewer seats).</p>
<pre class="r"><code>pa_house_tidy %&gt;%
  group_by(party_2016) %&gt;% 
  summarise(
    `count uncontested` = sum(margin_2016 == 100),
    `percent uncontested` = percent(mean(margin_2016 == 100))
  ) %&gt;% 
  knitr::kable()</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">party_2016</th>
<th align="right">count uncontested</th>
<th align="left">percent uncontested</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Democratic</td>
<td align="right">44</td>
<td align="left">53.7%</td>
</tr>
<tr class="even">
<td align="left">Republican</td>
<td align="right">45</td>
<td align="left">37.2%</td>
</tr>
</tbody>
</table>
<pre class="r"><code>pa_house_tidy %&gt;% 
  group_by(party_2016) %&gt;% 
  summarise(
    `count incumbent win` = sum(representative_2016 == representative_2018),
    `count flipped party` = sum(party_2016 == party_2018)
  ) %&gt;% 
  knitr::kable()</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">party_2016</th>
<th align="right">count incumbent win</th>
<th align="right">count flipped party</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Democratic</td>
<td align="right">68</td>
<td align="right">79</td>
</tr>
<tr class="even">
<td align="left">Republican</td>
<td align="right">89</td>
<td align="right">107</td>
</tr>
</tbody>
</table>
<pre class="r"><code>pa_house_tidy %&gt;% 
  ggplot(aes(margin_2016, margin_2018, color = party_2018)) +
    geom_jitter(size = 3) +
    facet_wrap(~ party_2016, ncol = 1) +
     scale_color_manual(
      values = c(&quot;Democratic&quot; = &quot;blue&quot;,
                 &quot;Republican&quot; = &quot;red&quot;)
    ) +
    labs(
        color = &quot;Party of district\nafter 2018 election&quot;,
        x = &quot;margin of victory - 2016 election&quot;,
        y = &quot;margin of victory - 2018 election&quot;
    )</code></pre>
<p><img src="/post/pa-house-progressive-above-replacement_files/figure-html/unnamed-chunk-12-1.png" width="672" />
Here we can see some of the results of the ‘blue wave’. Many districts that went solidly Republican in 2016 were closer in 2018 - those are seen along the right hand sand of the bottom half of the chart. Similary, many closely contest districts went entirely for Democrats in 2018 - those are along the top of the upper chart. You can alos see a clump of blue dots among the bottom half representing those districts that flipped from Republican to Democrat.</p>
<div id="progressiveness-by-win-margin" class="section level3">
<h3>Progressiveness by win margin</h3>
<pre class="r"><code>pa_house_tidy &lt;- pa_house_tidy %&gt;%
    filter(!is.na(progressive_avg))

model_dat &lt;- list(
    votes = pa_house_tidy$votes_cast,
    progressive_votes = as.integer(pa_house_tidy$progressive_votes),
    party = as.integer(as.factor(pa_house_tidy$party_2016)),
    margin = scale(pa_house_tidy$margin_2016)[,1]
)

glmod &lt;- ulam(
    alist(
        progressive_votes ~ dbinom(votes, p),
        logit(p) &lt;- a[party] + b[party] * margin,
        a[party] ~ dnorm(a_bar, a_sigma),
        a_bar ~ dnorm(0, 1.5),
        a_sigma ~ dexp(1),
        b[party] ~ dnorm(0, b_sigma),
        b_sigma ~ dexp(1)
    ), data = model_dat,
    chains = 4, cores = 4, log_lik = TRUE
)</code></pre>
<pre><code>## Warning: There were 5 divergent transitions after warmup. Increasing adapt_delta above 0.95 may help. See
## http://mc-stan.org/misc/warnings.html#divergent-transitions-after-warmup</code></pre>
<pre><code>## Warning: Examine the pairs() plot to diagnose sampling problems</code></pre>
<pre class="r"><code>precis(glmod, depth = 2)</code></pre>
<pre><code>##                mean         sd        5.5%        94.5%    n_eff      Rhat
## a[1]     1.32109521 0.08815650  1.18653898  1.463665880 2343.566 0.9996293
## a[2]    -1.02466580 0.06434304 -1.12509525 -0.923004589 2269.345 0.9994861
## a_bar    0.11184817 0.88622122 -1.29783528  1.563532283 1530.174 1.0011005
## a_sigma  1.60337983 0.76745043  0.73618415  3.050619487 1205.507 0.9999656
## b[1]     0.14555845 0.08556565  0.01315238  0.286034307 1431.607 1.0003657
## b[2]    -0.08822326 0.06260040 -0.19057227  0.007948014 1815.003 0.9992546
## b_sigma  0.29668411 0.30722705  0.05472930  0.787944083 1336.785 1.0005730</code></pre>
<pre class="r"><code>pairs(glmod)</code></pre>
<p><img src="/post/pa-house-progressive-above-replacement_files/figure-html/mod-1.png" width="672" /></p>
<pre class="r"><code>post &lt;- extract.samples(glmod)

apply_preds &lt;- function(margin, party) {

    post$a[, party] + post$b * margin

} 

possible &lt;- crossing(margin = seq(-1, 1, length.out = 100),
         party = c(1, 2))

preds &lt;- purrr::map2(possible$margin, possible$party, apply_preds)</code></pre>
<p>I’ll come back to the shaded part in a second.</p>
<p>There is definitely a trend that shows Democrats as more progressive and Republicans as less progressive if they won their district by a greater margin. However, it’s not a huge magnitude. A Democrat who won by less than one point is expeted to have about a .73 progressive average, compared to a Democrat winning uncontested, who is expected to vote progressive about 82% of the time.</p>
</div>
</div>
<div id="whos-is-most-and-least-progressive-based-on-their-margin-of-victory" class="section level2">
<h2>Whos is most and least progressive based on their margin of victory?</h2>
<p>The original PAR article looked at Democrats who were less progressive than expected based on their margin of victory. So who are they in PA?</p>
<p>There are … Democrats who won uncontested in 2016 races who were less progressive than expected. Let’s look at some of them.</p>
<p>All were re-elected, and all but one had uncontested general elections in 2018 (although some may have been primaried).</p>
<p>Chris Sainato has is the represenative for New Castle in Western PA and has been in office since 1995. However, he received a challenge from Republican in 2018 and won by only 13 points. So perhaps he knew that this was coming. He also released an (op-ed)[<a href="https://www.ncnewsonline.com/opinion/columns/chris-sainato-restoring-civility-to-our-politics/article_9e82083d-e78d-58e2-8527-4957bc9710b0.html" class="uri">https://www.ncnewsonline.com/opinion/columns/chris-sainato-restoring-civility-to-our-politics/article_9e82083d-e78d-58e2-8527-4957bc9710b0.html</a>] about civility in politics, so he’s definitely going all-in on the moderate Dem approach.</p>
<p>Tony DeLuca is has been in office since 1983 has been the subject of multiple investiagtions related to issues related to nepotism and fraud, was the subject of a recent BuzzFeed article about his relationship with insurance compaines. Safe to say he’s not the most progressive guy in the House.</p>
</div>
<div id="what-about-the-republicans" class="section level2">
<h2>What about the Republicans?</h2>
<p>Let’s come back to that grey shaded area in the chart. This shows Republicans who had a margin of victory below 31 points. It looks like very few dots above the line are outlined in black - meaning those candidates were not re-elected - compared to below the line. The table below shows the breakdown of what happened to these representatives in the 2018 election.</p>
<p>Of the 24 Republicans who were more progressive than the model predicts, 8 were defeated and 8 retired. Of the 45 less progressive than predicted, just two retired and none were defeated.</p>
<p>This is farily staggering. Even in a year when things swung toward more liberal candidates, Republcians that showed some amount of moderation were heavily punished for it.</p>
<p>Perhaps this is another example of increased partisanship? I’m not sure.</p>
</div>
<div id="conclusions" class="section level2">
<h2>Conclusions</h2>
<p>I set out to replicate the methodology used by Data for Progress. The goal of that analysis is to identify Democrats who could be pushed to support more progressive issues because they have little chance of being outsted. We that this is true for Pennsylvania as well, but we also saw examples of seats that seemed same become contested.</p>
<p>However, I found the ways in which Repbulicans who showed even a little bit of progressiveism were punished to be the most interesting finding of this analysis. Perhaps this is just a symtpom of the ‘blue wave’ - those seats were vulnerable and Democrats pounced. It seems like it can’t be just this though; when you look similarly contested seats, Republicans who were the least progressive were re-elected while those who were more progressive were not re-elected.</p>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>If you want to see the code I used to scrape this data, it’s <a href="https://www.github.com/jtcies/pa-par">here</a><a href="#fnref1" class="footnote-back">↩</a></p></li>
</ol>
</div>
